## Setting up istanbul for code coverage

Istanbul is tool for coverage which can work with karma testing. To read more about istanbul [click here](https://www.npmjs.com/package/istanbul)


## Environment Setup

To see the coverage you need to set up istanbul in your machine.

### 1. Install istanbul

```bash
$ npm install -g istanbul

The best way to see if this is working is to test on any sample test javascript file. You can go to BossyUI root folder and then

```bash
$ cd test

You have index.js file which is sample file. Try this command

```bash
$ istanbul cover index.js

and this should produce a coverage.json, lcov.info and lcov-report/*html under ./coverage. You can go to lcov-report folder and open index.html to see the coverage. But this works only for single file, we have karma set up and running so we want to run istanbull on whole code which can trigger our karma script.

### 2. Installing karma-coverage

The easiet way to way is to install karma-coverage as a devDependency, by running the following command from your root directory.

```bash
$ npm install -g karma karma-coverage --save-dev

This should install everything you need for code coverage and generate reports for our whole directoy.

Try this command to run/trigger the test

```bash
$ gulp run-tests

This should run a all the test cases written and generate a istanbul coverage report. You should be able see report in coverage folder with a browser name. 

```bash
$ cd test/coverage/
$ ls

This will give you the list of all the browsers it ran on, open the latest one which was created. It might look like this

![List of Browsers](/BossyUI/list_of_browsers.png "It shows the list of different browsers the test ran on")


```bash
$ cd (browser's name)
$ open index.html

This will open a report generated by istanbul, if you click on directives on that page you will be able to see all the different widget files and those are coverage reports.

